#flashcards 
***
[[Системный вызов]] типа "швейцарский нож" - используется для управления устройствами и выполнения операций, которые не вписываются в стандартную логику "прочитать файл" ([[Read системный вызов|read()]]) или "записать в файл" ([[Write системный вызов|write()]]).
- Используется, когда устройство - это файл, но с ним нужно сделать что-то специфическое.
- Для каждого устройства разработчик драйвера придумывает свои номера команд `request` => нет стандарта => читать много документации.
***
***Пример.***
Есть дисковод (файл `/dev/cdrom`), при помощи него хотим прочитать данные с диска при помощи `read()`.
Как сказать дисководу, чтобы он открыл слот? Для этого нужен `ioctl()`.
***
***Еще примеры.***
1. Узнать или изменить размер окна [[Терминал, Эмулятор терминала|терминала]].
2. Настроить скорость вращения кулера видеокарты.
3. Настроить сетевой интерфейс (прим: задать MAC-адрес устройства).
***
***Синтаксис.***
```C
#include <sys/ioctl.h>

int ioctl(int fd, unsigned long request, ...);
```
- `fd` - [[Файловый дескриптор (FD)|файловый дескриптор]] открытого устройства (пример с дисководом: `open("/dev/cdrom", ...)`).
- `request` - номер команды, зависящий от конкретного драйвера.
- `...` - необязательный аргумент, указатель на данные.