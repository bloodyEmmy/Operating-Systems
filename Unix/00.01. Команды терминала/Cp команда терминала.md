#flashcards
***
Копирует файлы и каталоги на уровне [[Файловая система|файловой системы]]. Позволяет работать с несколькими файлами и / или каталогами, чтобы скопировать их в ***один*** указанный каталог.
- Создает новую копию файла, выделяя для него новый inode и дублируя блоки данных на диске через последовательные [[Системный вызов|системные вызовы]] `read()` и `write()`.
***
***Принцип работы.***
1. Вызывает [[Open системный вызов|open()]] для исходного файла (на чтение).
2. Повторно вызывает `open()` с флагом `O_CREAT` для создания файла назначения. То есть [[Ядро операционной системы|ядро]] выделяет новый [[Индексный узел (inode)|inode]] для нового файла.
3. Вызывает [[Read системный вызов|read()]] из исходного файла и [[Write системный вызов|write()]] в файл назначения, пока не встретит конец файла (`EOF`).
4. Вызывает [[Close системный вызов|close()]] для обоих файлов.
***
***Параметры.***
1. `-a (--archive)` - скопировать файлы и каталоги со всеми атрибутами, включая идентификаторы и права доступа.
2. `-i (--interactive)` - запрашивать у пользователя подтверждение перед перезаписью файла. Если параметра нет, то cp просто перезапишет без предупреждения.
3. `-r (--recursive)` - ***обязательный параметр при копировании папок***, рекурсивно копирует файлы и каталоги.
4. `-u (--update)` - копирует только те файлы, которые отсутствуют в каталоге назначения, или более новые.
5. `-v (--verbose)` - выводить информационные сообщения в процессе копирования.
<!--SR:!2025-11-22,7,250-->