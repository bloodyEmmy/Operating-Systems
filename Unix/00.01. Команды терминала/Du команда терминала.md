#flashcards 
***
Оценивает, сколько реального места на диске занимает файл или директория.
- Написана на Си.
- [[Утилита]] для оценки реально используемого дискового пространства.
***
***Принцип работы.***
1. Рекурсивно обходит дерево каталогов (вызывая [[Opendir библиотечная функция|opendir()]] и [[Readdir библиотечная функция|readdir()]]).
2. Для каждого найденного файла вызывает [[Stat системный вызов|stat()]].
3. Из структуры `stat` берет ***НЕ*** поле `st_size` (байты) а поле `st_blocks`. Оно показывает, сколько блоков по 512 байт выделено [[Ядро операционной системы|ядром]] на диске для этого файла.
4. `du` суммирует блоки по всем файлам в директории.