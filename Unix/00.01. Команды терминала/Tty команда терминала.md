#flashcards 
***
***Немного теории.***
- [[Терминал, Эмулятор терминала|Терминал]] - это файл. Если программа хочет вывести в него букву "А", то она использует [[Write системный вызов|write("A")]].
- Также у каждой команды есть 3 [[Ввод, вывод, вывод ошибок|стандартных потока]], которые по умолчанию привязаны к терминалу (например, к файлу `/dev/pts/1`).
- Стандартные потоки могут меняться, например команда `cat < text.txt` меняет `stdin` со значения `0` (клавиатура / терминал) на файл `text.txt` (аналогично [[Перенаправление стандартного вывода|перенаправлению stdout]] через символ `<`).
***
***Причем здесь tty?***
Проблема изменения `stdin` влечет за собой неразбериху.
- Например, есть скрипт, которому на вход нужно дать пароль. Если пользователь сидит за терминалом, то именно оттуда нужно ожидать ввода. А если человека нет, то и пароль спрашивать не надо.
- `Tty` берет поток `0 == stdin` и спрашивает [[Ядро операционной системы|ядро]], привязан ли поток `0` к терминалу или чему-то другому.
- Ядро узнает эту информацию при помощи [[Ioctl системный вызов|ioctl()]].
- Если ядро говорит, что к терминалу (`/dev/pts/1`), то ждем ответа пользователя.
- Если нет (ввод из какого-то файла), то `tty` выводит `not a tty`.